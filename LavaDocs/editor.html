<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MoltenDocs Editor</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23ff5e3a' d='M12 2C12 2 4 8 4 14C4 18.4 7.6 22 12 22C16.4 22 20 18.4 20 14C20 8 12 2 12 2Z'/></svg>">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="editor-shell">
        <header class="editor-toolbar">
            <div class="toolbar-group">
                <a href="index.html" class="tool-btn" title="Back to Documents">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </a>
                <div class="toolbar-divider"></div>
                <div class="dropdown-wrap">
                    <button class="tool-btn file-menu-btn" id="fileMenuBtn" title="File">
                        <span style="font-size: 0.75rem; font-weight: 600;">File</span>
                    </button>
                    <div class="dropdown-panel hidden" id="fileMenu">
                        <div class="dropdown-option" id="btnImportJSON">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z" />
                            </svg>
                            Import JSON
                        </div>
                        <div class="dropdown-option" id="btnExportJSON">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" />
                            </svg>
                            Export JSON
                        </div>
                        <div class="dropdown-option" id="btnExportPNG">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" />
                            </svg>
                            Export PNG
                        </div>
                        <div class="dd-divider"></div>
                        <div class="dropdown-option" id="btnPrint">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z" />
                            </svg>
                            Print
                        </div>
                    </div>
                </div>
                <div class="toolbar-divider"></div>
                <div id="docTitle" class="doc-title-label" title="Double click to rename">Loading...</div>
                <span id="saveStatus" class="status-item" style="margin-left: 8px;">Saved</span>
            </div>
            <div class="toolbar-group">
                <button class="tool-btn" id="btnImage" title="Insert Image">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" />
                    </svg>
                </button>
                <button class="tool-btn" id="btnHelp" title="Keyboard Shortcuts">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z" />
                    </svg>
                </button>
                <input type="file" id="imageInput" accept="image/*" style="display:none;">
            </div>
        </header>

        <div class="format-bar" id="formatBar">
            <select id="fmtHeading" class="fmt-select" style="width: 90px;" title="Paragraph style">
                <option value="P">Normal</option>
                <option value="H1">Heading 1</option>
                <option value="H2">Heading 2</option>
                <option value="H3">Heading 3</option>
            </select>
            <div class="toolbar-divider"></div>
            <div class="font-picker-wrap">
                <button class="font-picker-btn" id="fontPickerBtn" title="Font family">
                    <span id="fontPickerLabel">Inter</span>
                    <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 10l5 5 5-5z" />
                    </svg>
                </button>
                <div class="font-picker-dropdown hidden" id="fontPickerDropdown"></div>
            </div>
            <div class="size-control">
                <button class="size-btn" id="sizeMinus" title="Decrease">−</button>
                <input type="number" id="fmtSize" class="fmt-size-input" value="14" min="8" max="96" title="Font size">
                <button class="size-btn" id="sizePlus" title="Increase">+</button>
            </div>
            <div class="toolbar-divider"></div>
            <button class="fmt-btn" id="btnBold" title="Bold (Ctrl+B)"><strong>B</strong></button>
            <button class="fmt-btn" id="btnItalic" title="Italic (Ctrl+I)"><em>I</em></button>
            <button class="fmt-btn" id="btnUnderline" title="Underline (Ctrl+U)"><u>U</u></button>
            <button class="fmt-btn" id="btnStrike" title="Strikethrough"><s>S</s></button>
            <div class="toolbar-divider"></div>
            <div class="color-swatch" title="Text color"><input type="color" id="fmtColor" value="#000000"></div>
            <div class="highlight-wrap">
                <button class="fmt-btn highlight-btn" id="highlightBtn"
                    title="Highlight (double-click for color wheel)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M11 2L5.5 16h2.25l1.12-3h6.25l1.12 3h2.25L13 2h-2zm-1.38 9L12 4.67 14.38 11H9.62z" />
                    </svg>
                    <div class="highlight-indicator" id="highlightIndicator" style="background:#ffff00;"></div>
                </button>
                <button class="fmt-btn highlight-arrow" id="highlightArrow" title="Pick highlight color">
                    <svg width="8" height="8" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 10l5 5 5-5z" />
                    </svg>
                </button>
                <div class="highlight-palette hidden" id="highlightPalette">
                    <div class="palette-color" data-color="#ffff00" style="background:#ffff00;" title="Yellow"></div>
                    <div class="palette-color" data-color="#00ff00" style="background:#00ff00;" title="Green"></div>
                    <div class="palette-color" data-color="#00ffff" style="background:#00ffff;" title="Cyan"></div>
                    <div class="palette-color" data-color="#ff9900" style="background:#ff9900;" title="Orange"></div>
                    <div class="palette-color" data-color="#ff69b4" style="background:#ff69b4;" title="Pink"></div>
                    <div class="palette-color" data-color="#da70d6" style="background:#da70d6;" title="Purple"></div>
                    <div class="palette-color" data-color="#87ceeb" style="background:#87ceeb;" title="Light Blue">
                    </div>
                    <div class="palette-color no-highlight" data-color="" title="Remove">✕</div>
                </div>
                <input type="color" id="highlightColorWheel" value="#ffff00" style="display:none;">
            </div>
            <div class="toolbar-divider"></div>
            <button class="fmt-btn" id="btnAlignL" title="Left"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path d="M3 3h18v2H3V3zm0 4h12v2H3V7zm0 4h18v2H3v-2zm0 4h12v2H3v-2zm0 4h18v2H3v-2z" />
                </svg></button>
            <button class="fmt-btn" id="btnAlignC" title="Center"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path d="M3 3h18v2H3V3zm3 4h12v2H6V7zm-3 4h18v2H3v-2zm3 4h12v2H6v-2zm-3 4h18v2H3v-2z" />
                </svg></button>
            <button class="fmt-btn" id="btnAlignR" title="Right"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path d="M3 3h18v2H3V3zm6 4h12v2H9V7zm-6 4h18v2H3v-2zm6 4h12v2H9v-2zm-6 4h18v2H3v-2z" />
                </svg></button>
            <button class="fmt-btn" id="btnAlignJ" title="Justify"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path d="M3 3h18v2H3V3zm0 4h18v2H3V7zm0 4h18v2H3v-2zm0 4h18v2H3v-2zm0 4h18v2H3v-2z" />
                </svg></button>
            <div class="toolbar-divider"></div>
            <button class="fmt-btn" id="btnUL" title="Bullet List"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path
                        d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z" />
                </svg></button>
            <button class="fmt-btn" id="btnOL" title="Numbered List"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path
                        d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z" />
                </svg></button>
            <div class="toolbar-divider"></div>
            <button class="fmt-btn" id="btnHR" title="Horizontal Rule"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path d="M2 11h20v2H2z" />
                </svg></button>
            <button class="fmt-btn" id="btnBlockquote" title="Quote"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z" />
                </svg></button>
            <div class="toolbar-divider"></div>
            <button class="fmt-btn" id="btnUndo" title="Undo (Ctrl+Z)"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path
                        d="M12.5 8c-2.65 0-5.05 1.04-6.83 2.73L3 8v9h9l-3.17-3.17C10.32 12.7 11.36 12.3 12.5 12.3c3.17 0 5.76 2.35 6.22 5.41l2.28-.46C20.37 13.33 16.8 8 12.5 8z" />
                </svg></button>
            <button class="fmt-btn" id="btnRedo" title="Redo (Ctrl+Y)"><svg width="16" height="16" viewBox="0 0 24 24"
                    fill="currentColor">
                    <path
                        d="M18.4 10.73C16.6 9.04 14.2 8 11.5 8c-4.3 0-7.87 5.33-8.5 9.25l2.28.46c.46-3.06 3.05-5.41 6.22-5.41 1.14 0 2.18.4 2.67 1.53L11 17h9V8l-1.6 2.73z" />
                </svg></button>
        </div>

        <div class="doc-workspace" id="docWorkspace">
            <div class="doc-page-scaler" id="pageScaler">
                <div class="doc-page" id="docContent" contenteditable="true" spellcheck="true">
                    <p><br></p>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-left">
                <span class="status-item" id="wordCount">0 words</span>
                <span class="status-item" id="charCount">0 chars</span>
            </div>
            <div class="status-right">
                <button class="zoom-btn" id="zoomOut" title="Zoom out">−</button>
                <span class="status-item" id="zoomLevel" style="min-width:36px;text-align:center;">100%</span>
                <button class="zoom-btn" id="zoomIn" title="Zoom in">+</button>
            </div>
        </div>
    </div>

    <div id="helpOverlay" class="modal-overlay hidden" onclick="this.classList.add('hidden')">
        <div class="modal" onclick="event.stopPropagation()" style="max-width:420px;text-align:left;">
            <div class="modal-header" style="text-align:center;">Keyboard Shortcuts</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.85rem;">
                <div><kbd>Ctrl+B</kbd> Bold</div>
                <div><kbd>Ctrl+I</kbd> Italic</div>
                <div><kbd>Ctrl+U</kbd> Underline</div>
                <div><kbd>Ctrl+Z</kbd> Undo</div>
                <div><kbd>Ctrl+Y</kbd> Redo</div>
                <div><kbd>Ctrl+S</kbd> Save</div>
                <div><kbd>Ctrl+P</kbd> Print</div>
                <div><kbd>Ctrl++</kbd> Zoom In</div>
                <div><kbd>Ctrl+-</kbd> Zoom Out</div>
                <div><kbd>Ctrl+0</kbd> Reset Zoom</div>
                <div><kbd>Tab</kbd> Indent</div>
                <div><kbd>Shift+Tab</kbd> Outdent</div>
            </div>
            <div style="margin-top:1.2rem;text-align:center;"><button class="btn btn-secondary"
                    onclick="document.getElementById('helpOverlay').classList.add('hidden')">Close</button></div>
        </div>
    </div>
    <input type="file" id="jsonInput" accept=".json" style="display:none;">
    <script src="editor.js"></script>
</body>

</html>